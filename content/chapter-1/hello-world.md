## Глава 1 Основы Java

В этой главе содержатся примеры, демонстрирующие основы синтаксиса языка Java; подразумевается, что она изучается вместе с главой 2 книги _"Java in a Nutshell"_.

> #### _Замечание_
> Дэвид Флэнаган "Java. Справочник", 4-е издание, Символ-Плюс, 2003

Если у вас есть существенный опыт программирования на C или C++, вы легко поймёте материал этой главы. Если же вы переходите на Java с другого языка, вам, возможно, понадобится изучить эти примеры более тщательно.

Важнейшим шагом при изучении нового языка программирования является овладение основными управляющими операторами языка. В отношении Java это означает изучение оператора ветвления _if/else_ и операторов цикла _while_ и _for_. Учиться программировать хорошо - это как учиться решать словесные задачи на уроках алгебры в средней школе: вы должны перевести абстрактное описание задачи на конкретный математический язык (в нашем случае на язык Java). Когда вы научитесь мыслить категориями операторов _if_, _while_ и _for_, другие операторы Java, такие как _break_, _continue_, _switch_ и _try/catch/finally_, будет уже легко усвоить. Обратите внимание на то, что хотя Java - это объектно-ориентированный язык, мы не будем обсуждать объекты до главы 2.

Итак, приняв изложенное за введение и положив себе целью изучить основы синтаксиса, перейдём прямо к написанию программ на Java.

## Hello World

Ещё в 1978 году Брайан Керниган (Brian Kernighan) и Деннис Ричи (Dennis Ritchie) в своей классической книге _"Язык программирования С"_ писали: "Программа, которую следует написать первой, для всех языков одна". Разумеется, они имели в виду программу _"Hello World"_. Реализация программы _"Hello World"_ на языке Java показана в примере 1.1.

### _Пример 1.1. Hello.java_

```java
package com.davidflanagan.examples.basics;    // Уникальный префикс имени
                                              // класса
public class Hello {                          // В Java всё является классом
    public static void main(String[] args) {  // Все программы должны
                                              // содержать метод main()
        System.out.println("Hello World!");   // Говорим Hello!
    }                                         // Отмечаем конец main()
}                                             // Отмечаем конец класса
```

Первой строкой программы является объявление `package`. Оно указывает имя _пакета (package)_, в который входит эта программа. Именем программы (как мы это видим из второй строки) является `Hello`. Имя пакета - это `com.davidflanagan.examples.basics`. Мы можем соединить их, чтобы получить полное имя программы, `com.davidflanagan.examples.basics.Hello`. Применение пакетов обеспечивает каждую программу Java уникальным пространством имён. Поместив программу `Hello` в пакет, я гарантирую, что если ещё кто-нибудь назовёт свою программу `Hello`, конфликта имён не произойдёт. Чтобы обеспечить заведомую уникальность имени пакета, я следую соглашению, по которому имя пакета начинается с доменного имени в Интернете, записанного в обратном порядке.

> #### _Замечание_
> Мой веб-сайт называется [http://www.davidflanagan.com](http://davidflanagan.com), поэтому имя моего пакета начинается с `com.davidflanagan`.

В каждой главе этой книги используется свой пакет с именем, начинающимся с префикса `com.davidflanagan.examples`. В этом примере, поскольку глава посвящена основам языка Java, именем пакета будет `com.davidflanagan.examples.basics`.

Ценность программы _"Hello World"_ заключается в том, что она является шаблоном, который вы можете расширять в собственных экспериментах с Java. Вторая и третья строки в примере 1.1 являются обязательной составляющей шаблона. Любая программа - на самом деле, любой кусок кода на Java - является классом. Во второй строке программы говорится, что мы создаём класс `Hello`. Она также сообщает, что наш класс является внешним (`public`); это означает, что его может использовать кто угодно.

Всякая самостоятельная программа на Java обязательно содержит метод `main()`. Именно с этого места интерпретатор Java начинает исполнение программы, написанной на Java. В третьей строке примера объявляется метод `main()`. В ней говорится, что этот метод является открытым (`public`), что он не возвращает значения (или, другими словами, возвращает значение `void`) и что в качестве аргументов он получает строковый массив. Имя этого массива - `args`. В этой строке утверждается также, что метод `main()` является статическим (`static`). (В этой главе мы будем иметь дело исключительно со статическими методами. В главе 2, когда мы начнём работать с объектами, вы узнаете, что такое статические методы и что методы, как правило, являются, напротив, нестатическими.)

Вы, во всяком случае, можете попросту заучить следующую строку:

```java
public static void main(String[] args)
```

Всякая самостоятельная программа на Java содержит строку, которая выглядит в точности, как эта. (По правде говоря, строковый массив вы можете назвать, как вам заблагорассудится, но обычно его называют именно `args`).

Пятая и шестая строки примера 1.1 просто отмечают конец метода `main()` и класса `Hello`. Подобно большинству современных языков, Java является языком с блочной структурой. Это означает, что у таких элементов, как классы и методы, есть тело, являющееся "блоком" программного кода. В Java начало блока отмечается открывающейся фигурной скобкой `{`, а конец - закрывающейся `}`. Блоки методов всегда определяются внутри блоков классов и, как мы увидим из нижеследующих примеров, блоки методов могут содержать операторы `if` и циклы `for`, образующие внутри метода подблоки. Более того, такие блоки операторов могут вкладываться друг в друга на любую глубину.

Три первые и две последние строки примера 1.1 принадлежат каркасу приложения на Java. Интерес представляет только четвёртая строка примера. Эта строка печатает слова _"Hello World!"_. Метод `System.out.println()` отправляет выводимую строку в "стандартный вывод", которым обычно является экран. Этот метод применяется на протяжении этой и многих последующих глав этой книги. Но только в главе 3 "Ввод/вывод" вы поймёте, что он делает в действительности. Если вам не терпится это узнать, найдите классы `java.lang.System` и `java.io.PrintStream` в книге "Java in a Nutshell" (или в каком-нибудь другом справочном руководстве по Java).

Последнее, о чём следует упомянуть в связи с этой программой - это комментарии. В примере 1.1 применяются комментарии в стиле C++, которые начинаются с символов `//` и продолжаются до конца строки. Таким образом, всё, что находится между символами `//` и концом строки, игнорируется компилятором Java. Вы обнаружите, что примеры в этой книге тщательно откомментированы. Комментарии в кодах заслуживают внимания, поскольку затрагивают некоторые вопросы, не нашедшие отражения в тексте.

## Запуск программы "Hello World"

Чтобы запустить программу, нужно первым делом её набрать.

> #### _Замечание_
> Хотя этот пример включён в онлайновый архив примеров, я советую вам набрать его самостоятельно. Если вы это сделаете, выражения языка Java глубже запечатлятся в вашей памяти. Я также буду предлагать вам модифицировать этот пример при объяснении некоторых аспектов исполнения программы.

Наберите при помощи текстового редактора программу `Hello` в том виде, в котором она приведена в примере 1.1. Но опустите теперь объявление пакета в первой строке. Сохраните программу в файле _`Hello.java`_.

Второй шаг состоит в компиляции программы. Если вы используете _Java Software Development Kit (SDK)_ производства компании _Sun_, то будете компилировать программу командой _`javac`_.

> #### _Замечание_
> Если вы применяете другую среду разработки программ на Java, изучите инструкции производителя по компиляции и запуску программ и следуйте им.

Перейдите в каталог, в котором содержится файл _`Hello.java`_, и наберите эту команду (в предположении, что путь к _`javac`_ известен системе):

```bash
% javac Hello.java
```

Если пакет _Java SDK_ был правильно установлен, _`javac`_ через небольшой промежуток времени создаст файл с именем _`Hello.class`_. В этом файле будет содержаться откомпилированная версия программы. Я уже говорил, что всё, что вы пишете в Java, является классом, и этот факт отражён в расширении _`.class`_ имени вашего файла. Важное правило, связанное с компиляцией программ на Java, состоит в том, что имя файла за вычетом расширения _`.java`_ должно совпадать с именем определённого в файле класса. Таким образом, если бы вы набрали пример 1.1 и сохранили его в файле с названием _`HelloWorld.java`_, вам не удалось бы его откомпилировать.

Чтобы запустить программу (с применением _Java SDK_), наберите:

```bash
% java Hello
```

Эта команда произведёт следующий вывод:

```
Hello World!
```

Команда _`java`_ - это интерпретатор Java; он запускает виртуальную машину Java. Вы передаёте _`java`_ имя запускаемого класса. Обратите внимание на то, что при этом следует указывать имя класса _`Hello`_, а не имя файла _`Hello.class`_, содержащего скомпилированный класс.

Выше было показано, как компилируется и запускается программа на Java, не содержащая объявление пакета. Если вы опустили объявление _`package`_ при наборе _`Hello.java`_, этих инструкций достаточно (если это не так, проверьте, правильно ли вы набрали программу). На практике, однако, все нетривиальные программы на Java (включая примеры из этой книги) содержат объявления _`package`_. При наличии объявления пакета процесс компиляции и запуска программ на Java несколько усложняется. Как я уже отмечал, программа на Java должна записываться в файл с именем, совпадающим с именем класса. Когда класс включается в пакет, добавляется требование, состоящее в том, чтобы имя каталога, в котором хранится этот файл, совпадало с именем пакета.

Давайте вернём в _`Hello.java`_ объявление пакета:

```java
package com.davidflanagan.examples.basics;
```

Создайте теперь каталог (или папку), в которой вы будете хранить все примеры из этой книги. В системе Windows, например, вы можете создать папку _`c:\jenut2`_. Под Linux можно создать каталог _`~/jenut2`_. В этом каталоге создайте каталог _`com`_. Теперь в каталоге _`com`_ создайте подкаталог с именем _`davidflanagan`_, а затем создайте подкаталог _`examples`_ в _`davidflanagan`_. Наконец, создайте в _`examples`_ подкаталог _`basics`_. Скопируйте программу _`Hello.java`_ (содержащую объявление пакета) в этот последний каталог. Под Windows получится файл с именем:

```
c:\jenut2\com\davidflanagan\examples\basics\Hello.java
```

Создав структуру каталогов и разместив в ней программу на Java, вы должны будете сообщить компилятору и интерпретатору Java, где теперь её искать. Компилятору и интерпретатору нужно знать только выбранный вами базовый каталог; файл _`Hello.class`_ они будут искать в его подкаталоге, ориентируясь по имени пакета. Чтобы указать Java направление поиска, вы должны присвоить значение переменной окружения _`CLASSPATH`_ способом, соответсвующим вашей операционной системе. Если, работая под Windows, вы приняли предложенное мной имя папки (_`c:\jenut2`_), можно использовать следующую команду:

```bash
C:\> set CLASSPATH=.;c:\jenut2
```

Эта команда предлагает Java искать программу сперва в текущем каталоге (`.`), а затем в каталоге _`c:\jenut2`_.

Под Unix при использовании оболочки _`csh`_ можно написать следующую команду:

```csh
% setenv CLASSPATH .:/home/david/jenut2
```

В оболочках _`sh`_ или _`bash`_ соответствующая команда будет такой:

```bash
$ CLASSPATH=.:/home/david/jenut2; export CLASSPATH
```

Можно автоматизировать этот процесс, включив команду установки переменной _`CLASSPATH`_ в стартовый файл, в _`autoexec.bat`_ под Windows или в _`.cshrc`_ под Unix (с оболочкой _`csh`_). Установив значение _`CLASSPATH`_, вы можете двинуться дальше и откомпилировать и запустить программу _`Hello`_. Перед компиляцией перейдите в каталог _`examples/basics`_, содержащий _`Hello.java`_. Запустите компилятор, как раньше:

```csh
% javac Hello.java
```

Результатом будет файл _`Hello.class`_.

Для запуска программы следует, как прежде, вызвать интерпретатор Java, но на этот раз вам придётся указать полностью квалифицированное имя программы, чтобы интерпретатору стало в точности известно, какую именно программу вы хотите исполнить:

```csh
% java com.davidflanagan.examples.basics.Hello
```

Установив переменную _`CLASSPATH`_, вы можете запускать интерпретатор Java из любого каталога вашей системы, и он всегда найдёт нужную программу. Если набор вручную таких длинных имён утомляет, вы, возможно, изготовите для себя подходящий командный файл или сценарий, который будет выполнять это автоматически.

Заметьте, что таким же образом запускаются и исполняются все программы на Java, так что мы не будем повторять описание этих шагов. Один шаг, который вы сможете, разумеется, пропустить, - это набор программы. Вы можете скачать исходные коды примеров с сайта _`http://www.davidflanagan.com/javaexamples2`_.
